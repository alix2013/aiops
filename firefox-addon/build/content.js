browser.runtime.onMessage.addListener(function(message,sender,sendResponse){if(message.action==="showInformation"){showInformation(message.selectedText)}});function showInformation(selectedText){let infoDiv=document.getElementById("askMoreInfo");if(!infoDiv){infoDiv=document.createElement("div");infoDiv.id="askMoreInfo";infoDiv.style.position="fixed";infoDiv.style.top="50px";infoDiv.style.right="0";infoDiv.style.width="30%";infoDiv.style.height="calc(100% - 50px)";infoDiv.style.backgroundColor="#f5f5f5";infoDiv.style.overflowY="auto";infoDiv.style.padding="10px";infoDiv.style.zIndex="9999";infoDiv.style.color="darkblue";infoDiv.style.border="1px solid #ccc";infoDiv.style.borderRadius="5px";const heading=document.createElement("div");heading.innerHTML=`<h1 style="font-size: 20px !important; font-weight: bold !important;">AI:</h1>`;const paragraph=document.createElement("div");paragraph.innerHTML=`<p style="font-size: 18px !important;">${selectedText.replace(/\n/g,"<br>")}</p>`;const copyIcon=document.createElement("div");copyIcon.innerHTML="&#128203;";copyIcon.style.cursor="pointer";copyIcon.style.marginTop="5px";copyIcon.addEventListener("mousedown",function(){console.log("copy icon mousedown called");const paragraph=infoDiv.querySelector("p");copyToClipboard(paragraph.innerText)});infoDiv.appendChild(heading);infoDiv.appendChild(paragraph);infoDiv.appendChild(copyIcon);document.body.appendChild(infoDiv);document.addEventListener("mouseup",function(){if(!document.getSelection().toString()){infoDiv.remove()}})}else{const heading=infoDiv.querySelector("h1");heading.innerHTML=`<h1 style="font-size: 20px !important; font-weight: bold !important;">AI:</h1>`;const paragraph=infoDiv.querySelector("p");paragraph.innerHTML=`<p style="font-size: 18px !important;">${selectedText.replace(/\n/g,"<br>")}</p>`}}function copyToClipboard(text){const textarea=document.createElement("textarea");textarea.value=text;document.body.appendChild(textarea);textarea.select();document.execCommand("copy");document.body.removeChild(textarea)}